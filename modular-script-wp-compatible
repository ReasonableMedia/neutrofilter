<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NeutroFilter – Browser-Based Tool (Open Source)</title>
  <meta name="description" content="NeutroFilter is an open-source browser-based tool that neutralises medically sensitive or legally protected terms into privacy-safe alternatives." />
  <meta name="author" content="The Reasonable Adjustment - https://thereasonableadjustment.co.uk" />
</head>
<body>
  <h2>NeutroFilter (Browser-Based Tool)</h2>
  <p>This free tool helps you rephrase health, disability, or legally sensitive language into neutral, privacy-protective alternatives. It runs entirely in your browser. No data is collected or stored.</p>

  <textarea id="inputText" rows="10" placeholder="Paste your message here..." style="width:100%; padding:1rem; font-size:1rem;"></textarea>

  <fieldset style="margin: 1rem 0;">
    <legend><strong>Filter Categories</strong></legend>
    <label><input type="checkbox" value="mental_health" checked /> Mental Health</label><br>
    <label><input type="checkbox" value="neurodivergence" checked /> Neurodivergence</label><br>
    <label><input type="checkbox" value="physical_health" checked /> Physical Health</label><br>
    <label><input type="checkbox" value="medication" checked /> Medication & Treatment</label><br>
    <label><input type="checkbox" value="disability_generic" checked /> Disability (General)</label>
  </fieldset>

  <button onclick="applyNeutroFilter()" style="padding:0.5rem 1rem;">Apply NeutroFilter</button>
  <button onclick="copyOutput()" style="margin-left:0.5rem; padding:0.5rem 1rem;">Copy Clean Text</button>

  <div id="output" style="margin-top:2rem; padding:1rem; background:#fff; border:1px solid #ccc;">
    <strong>Filtered Output:</strong>
    <p>(Your rephrased message will appear here)</p>
  </div>

  <p style="font-size:0.9rem; color:#555; margin-top:2rem;">
    <strong>Privacy note:</strong> NeutroFilter runs locally in your browser. No input is tracked, saved, or transmitted.
  </p>

  <footer>
    <p>NeutroFilter is an open-source project by <a href="https://thereasonableadjustment.co.uk" target="_blank">The Reasonable Adjustment</a></p>
    <p>Released under the <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a></p>
  </footer>

  <script>
    const filterCategories = {
      "mental_health": {
        label: "Mental Health",
        patterns: [
          { match: /\bi suffer from (depression|anxiety|bipolar|ptsd)\b/gi, replace: "i experience $1 symptoms" },
          { match: /\bdiagnosed with (depression|anxiety)\b/gi, replace: "identified with $1" },
          { match: /\bi have a mental health diagnosis\b/gi, replace: "i have a wellbeing-related condition" }
        ]
      },
      "neurodivergence": {
        label: "Neurodivergence",
        patterns: [
          { match: /\bi am autistic\b/gi, replace: "i experience communication differences" },
          { match: /\bi have autism\b/gi, replace: "i have communication needs" },
          { match: /\bdiagnosed with adhd\b/gi, replace: "identified with focus-related needs" }
        ]
      },
      "physical_health": {
        label: "Physical Health & Chronic Illness",
        patterns: [
          { match: /\bi suffer from (arthritis|fibromyalgia|chronic pain)\b/gi, replace: "i deal with ongoing discomfort" },
          { match: /\bi have (crohn's|ulcerative colitis|ibs)\b/gi, replace: "i have a digestive health condition" }
        ]
      },
      "medication": {
        label: "Medication & Treatment",
        patterns: [
          { match: /\bi take medication for .+?\b/gi, replace: "i manage a condition with treatment" },
          { match: /\bi[’']?m on .+?\b/gi, replace: "i receive ongoing support" }
        ]
      },
      "disability_generic": {
        label: "Disability (General)",
        patterns: [
          { match: /\bi am disabled\b/gi, replace: "i have access needs" },
          { match: /\bdue to my disability\b/gi, replace: "because of access barriers i face" }
        ]
      }
    };

    function applyNeutroFilter() {
      let input = document.getElementById("inputText").value;
      let output = input;
      const selected = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(el => el.value);
      selected.forEach(cat => {
        if (filterCategories[cat]) {
          filterCategories[cat].patterns.forEach(rule => {
            output = output.replace(rule.match, rule.replace);
          });
        }
      });
      output = output.charAt(0).toUpperCase() + output.slice(1);
      document.getElementById("output").innerHTML = "<strong>Filtered Output:</strong><p>" + output + "</p>";
    }

    function copyOutput() {
      const div = document.getElementById("output");
      const temp = document.createElement("textarea");
      temp.value = div.innerText.replace("Filtered Output:", "").trim();
      document.body.appendChild(temp);
      temp.select();
      document.execCommand("copy");
      document.body.removeChild(temp);
      alert("Cleaned text copied to clipboard.");
    }
  </script>
</body>
</html>
